<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>‡∏™‡∏≤‡∏ò‡∏∏ - ‡∏Ç‡∏≠‡∏á‡∏ñ‡∏ß‡∏≤‡∏¢‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Noto+Serif+Thai:wght@400;600;700&family=Charm:wght@400;700&family=Noto+Sans+Thai:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#8B2222", 
                        "sathu-gold": "#C5A059", 
                        "sathu-cream": "#F4EFE9",
                    },
                    fontFamily: {
                        "sans": ["Noto Sans Thai", "sans-serif"],
                        "serif": ["Noto Serif Thai", "serif"],
                        "logo": ["Charm", "serif"],
                    },
                    screens: {
                        'xs': '375px', // ‡πÄ‡∏û‡∏¥‡πà‡∏° breakpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏•‡πá‡∏Å
                    }
                },
            },
        }
    </script>
    
    <style>
        body {
            background-color: #F4EFE9;
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Glassmorphism ‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        .glass-mobile {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(197, 160, 89, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .dark .glass-mobile {
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(197, 160, 89, 0.2);
        }

        /* ‡∏ã‡πà‡∏≠‡∏ô Scrollbar ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animation */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        .shimmer-bg {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite;
        }

        .toast-enter { transform: translateY(100%); opacity: 0; }
        .toast-active { transform: translateY(0); opacity: 1; }
        
        /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô iOS zoom ‡∏ï‡∏≠‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå */
        input, textarea, select { font-size: 16px !important; }
    </style>
</head>
<body class="text-gray-900 dark:bg-black dark:text-gray-100 overflow-x-hidden">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            // üî¥ CONFIG: ‡∏ß‡∏≤‡∏á URL Web App ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyWtIdEa501vS402qP4BEGgGaufgVM6h8QUvEidyVhQgMPHd2Sv4wn5acSVuqdp_6kH/exec"; 

            const [isDark, setIsDark] = useState(false);
            const [screen, setScreen] = useState('home'); // home, checkout, success
            
            // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Fallback)
            const [products, setProducts] = useState([
                { id: 'lotus', name: '‡∏î‡∏≠‡∏Å‡∏ö‡∏±‡∏ß‡∏®‡∏¥‡∏•‡∏≤‡∏Ç‡∏≤‡∏ß', price: 10, stock: 99, imgId: '1yTbEv2lg8FU-_4jaXgV8yqpVt_71laKG' },
                { id: 'orchid', name: '‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡πÑ‡∏°‡πâ‡∏°‡πà‡∏ß‡∏á‡∏™‡∏¥‡∏£‡∏¥', price: 10, stock: 99, imgId: '1J1Eq279p2AO2nSI6MH4TZyXgkepQ6JkM' },
                { id: 'marigold', name: '‡∏î‡∏≤‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á', price: 10, stock: 99, imgId: '1It1hrUdx69s_U3WPMHMB8IsLGdfJN8H0' }
            ]);
            
            const [cart, setCart] = useState({});
            const [formData, setFormData] = useState({ name: "", phone: "", address: "", prayer: "", location: "" });
            const [isLoading, setIsLoading] = useState(false);
            const [toast, setToast] = useState({ show: false, msg: "" });
            
            // Slide to Pay State
            const [slideX, setSlideX] = useState(0);
            const [isDragging, setIsDragging] = useState(false);
            const sliderRef = useRef(null);

            // --- 1. FETCH DATA (AUTO) ---
            useEffect(() => {
                if (WEB_APP_URL) {
                    fetch(WEB_APP_URL, {
                        method: 'POST',
                        body: JSON.stringify({ action: 'getProducts' })
                    })
                    .then(res => res.json())
                    .then(data => {
                        if (data.success && data.products.length > 0) {
                            setProducts(data.products);
                        }
                    })
                    .catch(err => console.error("Auto fetch failed, using fallback.", err));
                }
            }, []);

            // --- 2. LOGIC ---
            const getImg = (id) => id.startsWith('http') ? id : `https://drive.google.com/thumbnail?id=${id}&sz=w800`;
            
            const toggleTheme = () => {
                setIsDark(!isDark);
                document.documentElement.classList.toggle('dark');
            };

            const updateQty = (id, change) => {
                setCart(prev => {
                    const newQty = (prev[id] || 0) + change;
                    if (newQty <= 0) {
                        const { [id]: _, ...rest } = prev;
                        return rest;
                    }
                    return { ...prev, [id]: newQty };
                });
                if (window.navigator.vibrate) window.navigator.vibrate(10);
            };

            const totalPrice = products.reduce((sum, p) => sum + ((cart[p.id] || 0) * p.price), 0);
            const totalItems = Object.values(cart).reduce((a, b) => a + b, 0);

            const showToast = (msg) => {
                setToast({ show: true, msg });
                setTimeout(() => setToast({ show: false, msg: "" }), 3000);
            };

            // --- 3. GPS ---
            const getLocation = () => {
                if (!navigator.geolocation) return showToast("‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS");
                showToast("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏û‡∏¥‡∏Å‡∏±‡∏î...");
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        setFormData(prev => ({ ...prev, location: `${pos.coords.latitude}, ${pos.coords.longitude}` }));
                        showToast("‚úÖ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß");
                    },
                    () => showToast("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á GPS")
                );
            };

            // --- 4. SLIDER ---
            const handleDragStart = (e) => {
                setIsDragging(true);
            };
            
            const handleDragMove = (e) => {
                if (!isDragging || !sliderRef.current) return;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const rect = sliderRef.current.getBoundingClientRect();
                const max = rect.width - 64; // button width
                const x = Math.max(0, Math.min(clientX - rect.left - 32, max));
                setSlideX(x);
                if (x >= max * 0.95) {
                    setIsDragging(false);
                    setSlideX(max);
                    submitOrder();
                }
            };

            const handleDragEnd = () => {
                if (!isDragging) return;
                setIsDragging(false);
                setSlideX(0);
            };

            // --- 5. SUBMIT ---
            const submitOrder = async () => {
                if (!formData.name || !formData.phone) return showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£");
                
                setIsLoading(true);
                const orderItems = Object.keys(cart).map(id => {
                    const p = products.find(x => x.id === id);
                    return `${p.name} x${cart[id]}`;
                }).join(", ");

                const payload = {
                    action: 'saveOrder',
                    ...formData,
                    items: orderItems,
                    totalPrice: totalPrice
                };

                try {
                    if (WEB_APP_URL) {
                        await fetch(WEB_APP_URL, { method: 'POST', body: JSON.stringify(payload) });
                    } else {
                        await new Promise(r => setTimeout(r, 2000)); // Demo delay
                    }
                    setScreen('success');
                    setCart({});
                } catch (e) {
                    showToast("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
                    setSlideX(0);
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <div className="min-h-screen relative max-w-md mx-auto shadow-2xl bg-white/50 dark:bg-black/50 overflow-hidden"
                     onMouseMove={handleDragMove} onTouchMove={handleDragMove} 
                     onMouseUp={handleDragEnd} onTouchEnd={handleDragEnd}>
                    
                    {/* --- TOP BAR --- */}
                    <div className="fixed top-0 left-0 right-0 z-50 p-4 flex justify-between items-center max-w-md mx-auto bg-gradient-to-b from-[#F4EFE9] to-transparent dark:from-black">
                        <div className="flex items-center gap-2">
                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                            <span className="text-[10px] font-bold uppercase tracking-widest text-primary dark:text-sathu-gold">Open Shop</span>
                        </div>
                        <button onClick={toggleTheme} className="w-10 h-10 rounded-full glass-mobile flex items-center justify-center text-sathu-gold shadow-sm active:scale-90 transition-transform">
                            <span className="material-icons-round text-lg">{isDark ? 'light_mode' : 'dark_mode'}</span>
                        </button>
                    </div>

                    {/* --- SCREEN: HOME --- */}
                    {screen === 'home' && (
                        <div className="pb-32 animate-[fadeIn_0.5s_ease-out]">
                            {/* Hero */}
                            <div className="relative h-[65vh] w-full rounded-b-[3rem] overflow-hidden shadow-xl">
                                <img src="https://images.unsplash.com/photo-1508608226934-2e928286a1df?q=80&w=800" className="w-full h-full object-cover scale-110 animate-float" />
                                <div className="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60"></div>
                                <div className="absolute inset-0 flex flex-col items-center justify-center text-center">
                                    <h1 className="font-logo text-7xl text-white drop-shadow-lg mb-2">‡∏™‡∏≤‡∏ò‡∏∏</h1>
                                    <p className="text-sathu-gold text-[10px] tracking-[0.5em] uppercase font-bold bg-black/30 px-4 py-1 rounded-full backdrop-blur-sm">Digital Nirvana</p>
                                </div>
                            </div>

                            {/* Categories (Bento Grid Mobile Optimized) */}
                            <div className="px-5 -mt-16 relative z-10">
                                <div className="grid grid-cols-2 gap-3">
                                    <div className="col-span-2 bg-white dark:bg-gray-900 rounded-[2rem] p-5 shadow-lg flex items-center justify-between border border-white/20" onClick={() => document.getElementById('shop').scrollIntoView({behavior:'smooth'})}>
                                        <div>
                                            <p className="text-[10px] text-gray-400 uppercase tracking-widest">Collection</p>
                                            <p className="text-xl font-logo text-primary dark:text-white">‡∏ä‡∏∏‡∏î‡∏ñ‡∏ß‡∏≤‡∏¢‡∏ß‡∏¥‡∏à‡∏¥‡∏ï‡∏£</p>
                                        </div>
                                        <span className="material-icons-round text-3xl text-sathu-gold">arrow_forward</span>
                                    </div>
                                    <div className="bg-[#8B2222] rounded-[2rem] p-4 flex flex-col justify-center items-center text-white shadow-lg h-32">
                                        <span className="material-icons-round text-3xl mb-2">spa</span>
                                        <span className="text-xs font-bold">‡∏ñ‡∏ß‡∏≤‡∏¢‡∏ö‡∏∏‡∏ç</span>
                                    </div>
                                    <div className="bg-white dark:bg-gray-900 rounded-[2rem] p-4 flex flex-col justify-center items-center text-primary dark:text-sathu-gold shadow-lg h-32 border border-white/20">
                                        <span className="material-icons-round text-3xl mb-2">auto_awesome</span>
                                        <span className="text-xs font-bold">‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</span>
                                    </div>
                                </div>
                            </div>

                            {/* Products */}
                            <div id="shop" className="px-5 mt-10 space-y-6">
                                <div className="flex justify-between items-end">
                                    <h2 className="text-2xl font-logo font-bold text-gray-800 dark:text-white">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                                    <span className="text-xs text-sathu-gold font-bold">‡∏ø10 / ‡∏´‡∏ô‡πà‡∏ß‡∏¢</span>
                                </div>
                                
                                {products.map(p => (
                                    <div key={p.id} className="relative bg-white dark:bg-gray-900 rounded-[2.5rem] p-3 shadow-lg flex gap-4 items-center border border-gray-100 dark:border-gray-800" onClick={() => updateQty(p.id, 1)}>
                                        <div className="w-24 h-24 rounded-[2rem] overflow-hidden shrink-0">
                                            <img src={getImg(p.imgId)} className="w-full h-full object-cover" />
                                        </div>
                                        <div className="flex-1 min-w-0 pr-2">
                                            <h3 className="font-logo text-xl text-gray-900 dark:text-white truncate">{p.name}</h3>
                                            <p className="text-[10px] text-gray-400 uppercase tracking-wider mb-2">In Stock: {p.stock}</p>
                                            <div className="flex items-center gap-2">
                                                {cart[p.id] > 0 ? (
                                                    <div className="flex items-center gap-3 bg-gray-100 dark:bg-gray-800 rounded-full px-1" onClick={e=>e.stopPropagation()}>
                                                        <button onClick={()=>updateQty(p.id, -1)} className="w-8 h-8 flex items-center justify-center text-primary"><span className="material-icons-round text-sm">remove</span></button>
                                                        <span className="text-sm font-bold w-4 text-center">{cart[p.id]}</span>
                                                        <button onClick={()=>updateQty(p.id, 1)} className="w-8 h-8 flex items-center justify-center text-primary"><span className="material-icons-round text-sm">add</span></button>
                                                    </div>
                                                ) : (
                                                    <span className="text-xs text-primary font-bold bg-red-50 dark:bg-red-900/30 px-3 py-1 rounded-full">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* --- SCREEN: CHECKOUT --- */}
                    {screen === 'checkout' && (
                        <div className="pt-20 px-6 pb-40 animate-[slideIn_0.3s_ease-out]">
                            <button onClick={()=>setScreen('home')} className="mb-6 flex items-center gap-2 text-xs font-bold text-gray-500 dark:text-gray-400">
                                <span className="material-icons-round text-sm">arrow_back_ios</span> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°
                            </button>
                            
                            <h2 className="text-4xl font-logo font-bold text-primary dark:text-sathu-gold mb-8">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
                            
                            <div className="space-y-4 mb-8">
                                {Object.keys(cart).map(id => {
                                    const p = products.find(x => x.id === id);
                                    return (
                                        <div key={id} className="flex justify-between items-center py-3 border-b border-gray-200 dark:border-gray-800">
                                            <div>
                                                <p className="font-bold text-lg dark:text-white">{p.name}</p>
                                                <p className="text-xs text-gray-400">x{cart[id]}</p>
                                            </div>
                                            <p className="font-bold text-primary">‡∏ø{cart[id] * p.price}</p>
                                        </div>
                                    )
                                })}
                                <div className="flex justify-between items-center pt-4">
                                    <p className="text-lg font-bold dark:text-white">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</p>
                                    <p className="text-3xl font-logo font-bold text-primary">‡∏ø{totalPrice}</p>
                                </div>
                            </div>

                            <div className="space-y-6">
                                <div className="glass-mobile p-5 rounded-3xl space-y-4">
                                    <div onClick={getLocation} className="flex items-center gap-4 cursor-pointer active:scale-95 transition-transform">
                                        <div className={`w-12 h-12 rounded-2xl flex items-center justify-center ${formData.location ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-500'}`}>
                                            <span className="material-icons-round">near_me</span>
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-xs font-bold text-gray-400">‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏à‡∏±‡∏î‡∏™‡πà‡∏á (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)</p>
                                            <p className="text-sm font-bold dark:text-white truncate">{formData.location || "‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ä‡∏£‡πå GPS"}</p>
                                        </div>
                                    </div>
                                    <input placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô" value={formData.name} onChange={e=>setFormData({...formData, name: e.target.value})} className="w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-2 outline-none dark:text-white" />
                                    <input type="tel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" value={formData.phone} onChange={e=>setFormData({...formData, phone: e.target.value})} className="w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-2 outline-none dark:text-white" />
                                    <input placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / ‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï" value={formData.address} onChange={e=>setFormData({...formData, address: e.target.value})} className="w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-2 outline-none dark:text-white" />
                                    <textarea placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏à‡∏¥‡∏ï..." value={formData.prayer} onChange={e=>setFormData({...formData, prayer: e.target.value})} className="w-full bg-gray-50 dark:bg-gray-800 rounded-xl p-3 text-sm outline-none dark:text-white resize-none h-24" />
                                </div>

                                {/* QR Code Section */}
                                <div className="bg-white dark:bg-gray-900 p-6 rounded-3xl text-center shadow-lg border border-gray-100 dark:border-gray-800">
                                    <p className="text-xs font-bold text-sathu-gold mb-4 uppercase tracking-widest">QR Payment</p>
                                    <div className="inline-block p-2 bg-white rounded-xl shadow-inner mb-4">
                                        <img src="https://lh3.googleusercontent.com/d/1g1z-sT8BDFYhbxph8uim7fzgtko42Pwd" className="w-40 h-40 object-contain" />
                                    </div>
                                    <p className="text-xl font-bold dark:text-white tracking-widest">084-793-6665</p>
                                    <p className="text-xs text-gray-400 mt-1">‡∏ß‡∏¥‡∏ó‡∏¢‡πå‡∏™‡∏£‡∏±‡∏ä ‡∏™‡∏∏‡∏à‡∏≤‡∏£‡∏µ</p>
                                    <button onClick={() => {navigator.clipboard.writeText("0847936665"); showToast("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß")}} className="mt-4 text-xs font-bold text-primary bg-primary/10 px-4 py-2 rounded-full">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
                                </div>
                            </div>

                            {/* Slider */}
                            <div className="fixed bottom-6 left-6 right-6 z-50">
                                <div ref={sliderRef} className="h-16 bg-gray-900 dark:bg-white rounded-full relative flex items-center px-2 shadow-2xl overflow-hidden">
                                    <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                        <span className="text-gray-500 dark:text-gray-400 font-bold text-sm uppercase tracking-widest animate-pulse">‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡∏ß‡∏≤‡∏¢‡∏ö‡∏∏‡∏ç</span>
                                    </div>
                                    <div className="absolute left-0 top-0 bottom-0 bg-primary/20 transition-all" style={{width: slideX + 64}}></div>
                                    <div ref={knobRef}
                                         onMouseDown={handleDragStart} onTouchStart={handleDragStart}
                                         style={{transform: `translateX(${slideX}px)`}} 
                                         className="w-12 h-12 bg-sathu-gold rounded-full flex items-center justify-center shadow-lg relative z-10 cursor-grab active:cursor-grabbing shimmer-bg">
                                        <span className="material-icons-round text-white">chevron_right</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- SCREEN: SUCCESS --- */}
                    {screen === 'success' && (
                        <div className="fixed inset-0 z-50 bg-[#F4EFE9] dark:bg-black flex flex-col items-center justify-center p-10 text-center animate-[fadeIn_0.5s_ease-out]">
                            <div className="w-32 h-32 bg-primary rounded-full flex items-center justify-center mb-8 shadow-2xl animate-bounce">
                                <span className="material-icons-round text-white text-6xl">spa</span>
                            </div>
                            <h2 className="text-6xl font-logo font-bold text-primary dark:text-sathu-gold mb-4">‡∏≠‡∏ô‡∏∏‡πÇ‡∏°‡∏ó‡∏ô‡∏≤</h2>
                            <p className="text-gray-600 dark:text-gray-400 mb-12 font-serif text-lg">"‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏ö‡∏∏‡∏ç‡∏™‡πà‡∏á‡∏ú‡∏•‡πÉ‡∏´‡πâ‡∏ó‡πà‡∏≤‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡∏£‡∏¥‡∏ç"</p>
                            <button onClick={()=>window.location.reload()} className="bg-gray-900 text-white px-10 py-4 rounded-full font-bold shadow-xl">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
                        </div>
                    )}

                    {/* --- BOTTOM NAV (HOME ONLY) --- */}
                    {screen === 'home' && totalItems > 0 && (
                        <div className="fixed bottom-6 left-6 right-6 z-40 animate-[slideUp_0.3s_ease-out]">
                            <button onClick={()=>setScreen('checkout')} className="w-full bg-gray-900 dark:bg-white text-white dark:text-black h-16 rounded-full shadow-2xl flex items-center justify-between px-6">
                                <div className="flex items-center gap-3">
                                    <div className="bg-primary w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white">{totalItems}</div>
                                    <span className="font-bold text-sm uppercase tracking-wider">‡πÑ‡∏õ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</span>
                                </div>
                                <span className="font-bold text-lg">‡∏ø{totalPrice}</span>
                            </button>
                        </div>
                    )}

                    {/* --- LOADER --- */}
                    {isLoading && (
                        <div className="fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center text-white">
                            <div className="w-12 h-12 border-4 border-white/20 border-t-sathu-gold rounded-full animate-spin mb-4"></div>
                            <p className="font-logo text-2xl animate-pulse">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
                        </div>
                    )}

                    {/* --- TOAST --- */}
                    <div className={`fixed bottom-24 left-1/2 -translate-x-1/2 bg-black/90 text-white px-6 py-3 rounded-full shadow-2xl text-sm font-bold z-[100] transition-all duration-300 ${toast.show ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
                        {toast.msg}
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

